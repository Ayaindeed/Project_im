{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{getUserStats,toggleUserStatus}from'../services/userService';import'../styles/AdminUsers.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUsers=()=>{const[users,setUsers]=useState([]);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const fetchUsers=async()=>{setIsLoading(true);try{const data=await getUserStats();setUsers(data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Erreur lors du chargement des utilisateurs\");}finally{setIsLoading(false);}};useEffect(()=>{fetchUsers();},[]);const handleToggle=async id=>{try{await toggleUserStatus(id);fetchUsers();}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Erreur lors du changement de statut\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-users-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des Utilisateurs\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Chargement...\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"admin-users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Utilisateur\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date d'inscription\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[u.nom,\" \",u.prenom]})}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"role-badge role-\".concat(u.role),children:u.role==='admin'?'Administrateur':u.role==='entreprise'?'Entreprise':'Étudiant'})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"registration-date\",children:new Date(u.dateInscription).toLocaleDateString()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(u.actif?'status-active':'status-inactive'),children:u.actif?'Actif':'Inactif'})}),\"                \",/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleToggle(u.id),className:\"status-toggle \".concat(u.actif?'deactivate':'activate'),children:u.actif?'Désactiver':'Activer'}),/*#__PURE__*/_jsx(Link,{to:\"/admin-user/\".concat(u.id),className:\"details-button\",children:\"D\\xE9tails\"})]})]},u.id))})]})]});};export default AdminUsers;","map":{"version":3,"names":["React","useEffect","useState","Link","getUserStats","toggleUserStatus","jsx","_jsx","jsxs","_jsxs","AdminUsers","users","setUsers","error","setError","isLoading","setIsLoading","fetchUsers","data","err","_err$response","_err$response$data","response","message","handleToggle","id","_err$response2","_err$response2$data","className","children","map","u","nom","prenom","email","concat","role","Date","dateInscription","toLocaleDateString","actif","onClick","to"],"sources":["C:/Users/hp/Downloads/Project_/internship-management-app/frontend/src/pages/AdminUsers.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { getUserStats, toggleUserStatus } from '../services/userService';\r\nimport '../styles/AdminUsers.css';\r\n\r\nconst AdminUsers = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const fetchUsers = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await getUserStats();\r\n      setUsers(data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Erreur lors du chargement des utilisateurs\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleToggle = async (id) => {\r\n    try {\r\n      await toggleUserStatus(id);\r\n      fetchUsers();\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Erreur lors du changement de statut\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-users-container\">\r\n      <h2>Gestion des Utilisateurs</h2>\r\n      \r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      \r\n      {isLoading ? (\r\n        <div className=\"loading\">Chargement...</div>\r\n      ) : (\r\n        <table className=\"admin-users-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Utilisateur</th>\r\n              <th>Email</th>\r\n              <th>Rôle</th>\r\n              <th>Date d'inscription</th>\r\n              <th>Statut</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map(u => (\r\n              <tr key={u.id}>\r\n                <td>\r\n                  <strong>{u.nom} {u.prenom}</strong>\r\n                </td>\r\n                <td>{u.email}</td>\r\n                <td>\r\n                  <span className={`role-badge role-${u.role}`}>\r\n                    {u.role === 'admin' ? 'Administrateur' : \r\n                     u.role === 'entreprise' ? 'Entreprise' : 'Étudiant'}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <span className=\"registration-date\">\r\n                    {new Date(u.dateInscription).toLocaleDateString()}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <span className={`status-badge ${u.actif ? 'status-active' : 'status-inactive'}`}>\r\n                    {u.actif ? 'Actif' : 'Inactif'}\r\n                  </span>\r\n                </td>                <td>\r\n                  <button \r\n                    onClick={() => handleToggle(u.id)} \r\n                    className={`status-toggle ${u.actif ? 'deactivate' : 'activate'}`}\r\n                  >\r\n                    {u.actif ? 'Désactiver' : 'Activer'}\r\n                  </button>\r\n                  <Link to={`/admin-user/${u.id}`} className=\"details-button\">\r\n                    Détails\r\n                  </Link>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminUsers;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}