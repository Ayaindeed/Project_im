{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import Logo from'../Logo/Logo';import NotificationBell from'../NotificationBell';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const NavBar=()=>{const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const history=useHistory();// Fonction pour rafraîchir l'état d'authentification\nconst refreshAuthState=()=>{const token=localStorage.getItem('token');const userData=JSON.parse(localStorage.getItem('user'));if(token&&userData){setIsAuthenticated(true);setUser(userData);}else{setIsAuthenticated(false);setUser(null);}};// Initialiser l'état d'authentification au chargement\nuseEffect(()=>{refreshAuthState();// Écouter les événements de connexion\nconst handleLogin=()=>refreshAuthState();window.addEventListener('userLogin',handleLogin);// Nettoyer les écouteurs d'événements\nreturn()=>{window.removeEventListener('userLogin',handleLogin);};},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsAuthenticated(false);setUser(null);// Dispatch un événement de déconnexion\nconst logoutEvent=new CustomEvent('userLogout');window.dispatchEvent(logoutEvent);history.push('/login');};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-left\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo-link\",children:/*#__PURE__*/_jsx(Logo,{width:\"120px\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-right\",children:isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{className:\"nav-menu\",children:[\"                            \",(user===null||user===void 0?void 0:user.role)==='entreprise'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/entreprise-dashboard\",className:\"nav-link\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/entreprise-stages\",className:\"nav-link\",children:\"Mes Stages\"}),/*#__PURE__*/_jsx(Link,{to:\"/entreprise-candidatures\",className:\"nav-link\",children:\"Demandes Re\\xE7ues\"})]}),\"                            \",(user===null||user===void 0?void 0:user.role)==='etudiant'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"nav-link\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/stages\",className:\"nav-link\",children:\"Stages\"}),/*#__PURE__*/_jsx(Link,{to:\"/mes-candidatures\",className:\"nav-link\",children:\"Mes candidatures\"})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin-dashboard\",className:\"nav-link\",children:\"Tableau de bord\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin-users\",className:\"nav-link\",children:\"Utilisateurs\"})]}),/*#__PURE__*/_jsx(NotificationBell,{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"auth-button\",children:\"D\\xE9connexion\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"auth-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"auth-button secondary\",children:\"S'inscrire\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"auth-button primary\",children:\"Se connecter\"})]})})]})});};export default NavBar;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","Logo","NotificationBell","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NavBar","isAuthenticated","setIsAuthenticated","user","setUser","history","refreshAuthState","token","localStorage","getItem","userData","JSON","parse","handleLogin","window","addEventListener","removeEventListener","handleLogout","removeItem","logoutEvent","CustomEvent","dispatchEvent","push","className","children","to","width","role","onClick"],"sources":["C:/Users/hp/Downloads/Project_/internship-management-app/frontend/src/components/Navbar/NavBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport Logo from '../Logo/Logo';\r\nimport NotificationBell from '../NotificationBell';\r\n\r\nconst NavBar = () => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n\r\n    // Fonction pour rafraîchir l'état d'authentification\r\n    const refreshAuthState = () => {\r\n        const token = localStorage.getItem('token');\r\n        const userData = JSON.parse(localStorage.getItem('user'));\r\n        if (token && userData) {\r\n            setIsAuthenticated(true);\r\n            setUser(userData);\r\n        } else {\r\n            setIsAuthenticated(false);\r\n            setUser(null);\r\n        }\r\n    };  \r\n\r\n    // Initialiser l'état d'authentification au chargement\r\n    useEffect(() => {\r\n        refreshAuthState();\r\n        \r\n        // Écouter les événements de connexion\r\n        const handleLogin = () => refreshAuthState();\r\n        window.addEventListener('userLogin', handleLogin);\r\n        \r\n        // Nettoyer les écouteurs d'événements\r\n        return () => {\r\n            window.removeEventListener('userLogin', handleLogin);\r\n        };\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        setIsAuthenticated(false);\r\n        setUser(null);\r\n        \r\n        // Dispatch un événement de déconnexion\r\n        const logoutEvent = new CustomEvent('userLogout');\r\n        window.dispatchEvent(logoutEvent);\r\n        \r\n        history.push('/login');\r\n    };\r\n\r\n    return (\r\n        <nav className=\"navbar\">\r\n            <div className=\"nav-content\">\r\n                <div className=\"nav-left\">\r\n                    <Link to=\"/\" className=\"logo-link\">\r\n                        <Logo width=\"120px\" />\r\n                    </Link>\r\n                </div>\r\n\r\n                <div className=\"nav-right\">\r\n                    {isAuthenticated ? (                        <div className=\"nav-menu\">                            {user?.role === 'entreprise' && (\r\n                                <>\r\n                                    <Link to=\"/entreprise-dashboard\" className=\"nav-link\">Dashboard</Link>\r\n                                    <Link to=\"/entreprise-stages\" className=\"nav-link\">Mes Stages</Link>\r\n                                    <Link to=\"/entreprise-candidatures\" className=\"nav-link\">Demandes Reçues</Link>\r\n                                </>\r\n                            )}                            {user?.role === 'etudiant' && (\r\n                                <>\r\n                                    <Link to=\"/dashboard\" className=\"nav-link\">Dashboard</Link>\r\n                                    <Link to=\"/stages\" className=\"nav-link\">Stages</Link>\r\n                                    <Link to=\"/mes-candidatures\" className=\"nav-link\">Mes candidatures</Link>\r\n                                </>\r\n                            )}\r\n                            \r\n                            {user?.role === 'admin' && (\r\n                                <>\r\n                                    <Link to=\"/admin-dashboard\" className=\"nav-link\">Tableau de bord</Link>\r\n                                    <Link to=\"/admin-users\" className=\"nav-link\">Utilisateurs</Link>\r\n                                </>\r\n                            )}\r\n                            \r\n                            <NotificationBell />\r\n                            \r\n                            <button onClick={handleLogout} className=\"auth-button\">\r\n                                Déconnexion\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"auth-buttons\">\r\n                            <Link to=\"/register\" className=\"auth-button secondary\">S'inscrire</Link>\r\n                            <Link to=\"/login\" className=\"auth-button primary\">Se connecter</Link>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default NavBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}