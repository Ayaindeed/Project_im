{"ast":null,"code":"import _objectSpread from\"C:/Users/hp/Downloads/Project_/internship-management-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useHistory,Link}from'react-router-dom';import{loginUser}from'../../services/authService';import GoogleAuthButton from'./GoogleAuthButton';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[credentials,setCredentials]=useState({email:'',motdepasse:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const history=useHistory();const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await loginUser(credentials);// Attendre que l'événement userLogin soit traité par AppRouter\nawait new Promise(resolve=>setTimeout(resolve,300));// Déterminer la route de destination selon le rôle\nlet dashboardRoute;if(response.user.role==='admin'){dashboardRoute='/admin-dashboard';}else if(response.user.role==='entreprise'){dashboardRoute='/entreprise-dashboard';}else{dashboardRoute='/dashboard';}// Utiliser React Router pour une navigation fluide\nhistory.push(dashboardRoute);// Garder le loading actif pendant la transition\nsetTimeout(()=>setLoading(false),100);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Erreur de connexion');setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"welcome-title\",children:\"BIENVENUE \\xC0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-logo\",children:/*#__PURE__*/_jsx(\"span\",{className:\"logo-text\",children:\"InternMatch\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login-title\",children:\"Connexion\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(GoogleAuthButton,{type:\"login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\",children:/*#__PURE__*/_jsx(\"span\",{children:\"ou\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Adresse email\",value:credentials.email,onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Mot de passe\",value:credentials.motdepasse,onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{motdepasse:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block login-submit-btn \".concat(loading?'loading':''),disabled:loading,children:loading?'':'Se connecter'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-links\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"forgot-password-link\",children:\"Mot de passe oubli\\xE9 ?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-footer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"signup-text\",children:\"Pas encore de compte ?\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"btn btn-secondary btn-block signup-btn\",children:\"Cr\\xE9er un compte\"})]})]})]})})})});};export default Login;","map":{"version":3,"names":["React","useState","useHistory","Link","loginUser","GoogleAuthButton","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","email","motdepasse","error","setError","loading","setLoading","history","handleSubmit","e","preventDefault","response","Promise","resolve","setTimeout","dashboardRoute","user","role","push","err","_err$response","_err$response$data","data","message","className","children","type","onSubmit","placeholder","value","onChange","_objectSpread","target","required","concat","disabled","to"],"sources":["C:/Users/hp/Downloads/Project_/internship-management-app/frontend/src/components/Auth/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport { loginUser } from '../../services/authService';\nimport GoogleAuthButton from './GoogleAuthButton';\n\nconst Login = () => {\n    const [credentials, setCredentials] = useState({\n        email: '',\n        motdepasse: ''\n    });\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const history = useHistory();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n        \n        try {\n            const response = await loginUser(credentials);\n            \n            // Attendre que l'événement userLogin soit traité par AppRouter\n            await new Promise(resolve => setTimeout(resolve, 300));\n            \n            // Déterminer la route de destination selon le rôle\n            let dashboardRoute;\n            if (response.user.role === 'admin') {\n                dashboardRoute = '/admin-dashboard';\n            } else if (response.user.role === 'entreprise') {\n                dashboardRoute = '/entreprise-dashboard';\n            } else {\n                dashboardRoute = '/dashboard';\n            }\n            \n            // Utiliser React Router pour une navigation fluide\n            history.push(dashboardRoute);\n            \n            // Garder le loading actif pendant la transition\n            setTimeout(() => setLoading(false), 100);\n            \n        } catch (err) {\n            setError(err.response?.data?.message || 'Erreur de connexion');\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"login-wrapper\">\n            <div className=\"login-container\">\n                <div className=\"login-box\">\n                    <div className=\"login-form-container\">\n                        <div className=\"login-header\">\n                            <h1 className=\"welcome-title\">BIENVENUE À</h1>\n                            <div className=\"app-logo\">\n                                <span className=\"logo-text\">InternMatch</span>\n                            </div>\n                        </div>\n\n                        <div className=\"login-form-wrapper\">\n                            <h2 className=\"login-title\">Connexion</h2>\n                            \n                            {error && <div className=\"error-message\">{error}</div>}\n\n                            <GoogleAuthButton type=\"login\" />\n                            \n                            <div className=\"divider\">\n                                <span>ou</span>\n                            </div>\n\n                            <form onSubmit={handleSubmit} className=\"login-form\">\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"email\"\n                                        className=\"form-control\"\n                                        placeholder=\"Adresse email\"\n                                        value={credentials.email}\n                                        onChange={(e) => setCredentials({...credentials, email: e.target.value})}\n                                        required\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <input\n                                        type=\"password\"\n                                        className=\"form-control\"\n                                        placeholder=\"Mot de passe\"\n                                        value={credentials.motdepasse}\n                                        onChange={(e) => setCredentials({...credentials, motdepasse: e.target.value})}\n                                        required\n                                    />\n                                </div>\n\n                                <button type=\"submit\" className={`btn btn-primary btn-block login-submit-btn ${loading ? 'loading' : ''}`} disabled={loading}>\n                                    {loading ? '' : 'Se connecter'}\n                                </button>\n                            </form>\n\n                            <div className=\"login-links\">\n                                <Link to=\"/forgot-password\" className=\"forgot-password-link\">\n                                    Mot de passe oublié ?\n                                </Link>\n                            </div>\n\n                            <div className=\"login-footer\">\n                                <p className=\"signup-text\">Pas encore de compte ?</p>\n                                <Link to=\"/register\" className=\"btn btn-secondary btn-block signup-btn\">\n                                    Créer un compte\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;"],"mappings":"sJAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,UAAU,CAAEC,IAAI,KAAQ,kBAAkB,CACnD,OAASC,SAAS,KAAQ,4BAA4B,CACtD,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,CAC3CY,KAAK,CAAE,EAAE,CACTC,UAAU,CAAE,EAChB,CAAC,CAAC,CACF,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAkB,OAAO,CAAGjB,UAAU,CAAC,CAAC,CAE5B,KAAM,CAAAkB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBJ,UAAU,CAAC,IAAI,CAAC,CAChBF,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACA,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAnB,SAAS,CAACO,WAAW,CAAC,CAE7C;AACA,KAAM,IAAI,CAAAa,OAAO,CAACC,OAAO,EAAIC,UAAU,CAACD,OAAO,CAAE,GAAG,CAAC,CAAC,CAEtD;AACA,GAAI,CAAAE,cAAc,CAClB,GAAIJ,QAAQ,CAACK,IAAI,CAACC,IAAI,GAAK,OAAO,CAAE,CAChCF,cAAc,CAAG,kBAAkB,CACvC,CAAC,IAAM,IAAIJ,QAAQ,CAACK,IAAI,CAACC,IAAI,GAAK,YAAY,CAAE,CAC5CF,cAAc,CAAG,uBAAuB,CAC5C,CAAC,IAAM,CACHA,cAAc,CAAG,YAAY,CACjC,CAEA;AACAR,OAAO,CAACW,IAAI,CAACH,cAAc,CAAC,CAE5B;AACAD,UAAU,CAAC,IAAMR,UAAU,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CAE5C,CAAE,MAAOa,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACVjB,QAAQ,CAAC,EAAAgB,aAAA,CAAAD,GAAG,CAACR,QAAQ,UAAAS,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcE,IAAI,UAAAD,kBAAA,iBAAlBA,kBAAA,CAAoBE,OAAO,GAAI,qBAAqB,CAAC,CAC9DjB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,mBACIX,IAAA,QAAK6B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC1B9B,IAAA,QAAK6B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC5B9B,IAAA,QAAK6B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACtB5B,KAAA,QAAK2B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACjC5B,KAAA,QAAK2B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzB9B,IAAA,OAAI6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAW,CAAI,CAAC,cAC9C9B,IAAA,QAAK6B,SAAS,CAAC,UAAU,CAAAC,QAAA,cACrB9B,IAAA,SAAM6B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,CAC7C,CAAC,EACL,CAAC,cAEN5B,KAAA,QAAK2B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAC/B9B,IAAA,OAAI6B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,CAEzCtB,KAAK,eAAIR,IAAA,QAAK6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEtB,KAAK,CAAM,CAAC,cAEtDR,IAAA,CAACF,gBAAgB,EAACiC,IAAI,CAAC,OAAO,CAAE,CAAC,cAEjC/B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAAC,QAAA,cACpB9B,IAAA,SAAA8B,QAAA,CAAM,IAAE,CAAM,CAAC,CACd,CAAC,cAEN5B,KAAA,SAAM8B,QAAQ,CAAEnB,YAAa,CAACgB,SAAS,CAAC,YAAY,CAAAC,QAAA,eAChD9B,IAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvB9B,IAAA,UACI+B,IAAI,CAAC,OAAO,CACZF,SAAS,CAAC,cAAc,CACxBI,WAAW,CAAC,eAAe,CAC3BC,KAAK,CAAE9B,WAAW,CAACE,KAAM,CACzB6B,QAAQ,CAAGrB,CAAC,EAAKT,cAAc,CAAA+B,aAAA,CAAAA,aAAA,IAAKhC,WAAW,MAAEE,KAAK,CAAEQ,CAAC,CAACuB,MAAM,CAACH,KAAK,EAAC,CAAE,CACzEI,QAAQ,MACX,CAAC,CACD,CAAC,cAENtC,IAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvB9B,IAAA,UACI+B,IAAI,CAAC,UAAU,CACfF,SAAS,CAAC,cAAc,CACxBI,WAAW,CAAC,cAAc,CAC1BC,KAAK,CAAE9B,WAAW,CAACG,UAAW,CAC9B4B,QAAQ,CAAGrB,CAAC,EAAKT,cAAc,CAAA+B,aAAA,CAAAA,aAAA,IAAKhC,WAAW,MAAEG,UAAU,CAAEO,CAAC,CAACuB,MAAM,CAACH,KAAK,EAAC,CAAE,CAC9EI,QAAQ,MACX,CAAC,CACD,CAAC,cAENtC,IAAA,WAAQ+B,IAAI,CAAC,QAAQ,CAACF,SAAS,+CAAAU,MAAA,CAAgD7B,OAAO,CAAG,SAAS,CAAG,EAAE,CAAG,CAAC8B,QAAQ,CAAE9B,OAAQ,CAAAoB,QAAA,CACxHpB,OAAO,CAAG,EAAE,CAAG,cAAc,CAC1B,CAAC,EACP,CAAC,cAEPV,IAAA,QAAK6B,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxB9B,IAAA,CAACJ,IAAI,EAAC6C,EAAE,CAAC,kBAAkB,CAACZ,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,0BAE7D,CAAM,CAAC,CACN,CAAC,cAEN5B,KAAA,QAAK2B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzB9B,IAAA,MAAG6B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,wBAAsB,CAAG,CAAC,cACrD9B,IAAA,CAACJ,IAAI,EAAC6C,EAAE,CAAC,WAAW,CAACZ,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,oBAExE,CAAM,CAAC,EACN,CAAC,EACL,CAAC,EACL,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA3B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}