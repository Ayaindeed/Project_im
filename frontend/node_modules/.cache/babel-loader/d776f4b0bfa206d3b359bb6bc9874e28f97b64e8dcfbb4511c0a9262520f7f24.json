{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Downloads\\\\Project_\\\\internMatch\\\\frontend\\\\src\\\\components\\\\Auth\\\\GoogleAuthSuccess.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport './GoogleAuthSuccess.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleAuthSuccess = () => {\n  _s();\n  const history = useHistory();\n  const location = useLocation();\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const handleGoogleAuthSuccess = () => {\n      try {\n        // Parse URL parameters\n        const urlParams = new URLSearchParams(location.search);\n        const token = urlParams.get('token');\n        const userDataParam = urlParams.get('user');\n        const errorParam = urlParams.get('error');\n        if (errorParam) {\n          setError(getErrorMessage(errorParam));\n          setTimeout(() => {\n            history.push('/login');\n          }, 3000);\n          return;\n        }\n        if (token && userDataParam) {\n          try {\n            const userData = JSON.parse(decodeURIComponent(userDataParam));\n\n            // Store authentication data\n            localStorage.setItem('token', token);\n            localStorage.setItem('user', JSON.stringify(userData));\n\n            // Dispatch login event\n            const loginEvent = new CustomEvent('userLogin', {\n              detail: {\n                user: userData\n              }\n            });\n            window.dispatchEvent(loginEvent);\n\n            // Redirect to appropriate dashboard\n            let dashboardRoute;\n            if (userData.role === 'admin') {\n              dashboardRoute = '/admin-dashboard';\n            } else if (userData.role === 'entreprise') {\n              dashboardRoute = '/entreprise-dashboard';\n            } else {\n              dashboardRoute = '/dashboard';\n            }\n            history.push(dashboardRoute);\n          } catch (parseError) {\n            console.error('Error parsing user data:', parseError);\n            setError('Erreur lors du traitement des données utilisateur');\n            setTimeout(() => {\n              history.push('/login');\n            }, 3000);\n          }\n        } else {\n          setError('Données d\\'authentification manquantes');\n          setTimeout(() => {\n            history.push('/login');\n          }, 3000);\n        }\n      } catch (error) {\n        console.error('Google auth success error:', error);\n        setError('Erreur lors de l\\'authentification');\n        setTimeout(() => {\n          history.push('/login');\n        }, 3000);\n      }\n    };\n    handleGoogleAuthSuccess();\n  }, [history, location]);\n  const getErrorMessage = errorCode => {\n    switch (errorCode) {\n      case 'authentication_failed':\n        return 'Échec de l\\'authentification Google';\n      case 'google_auth_failed':\n        return 'Erreur lors de l\\'authentification Google';\n      case 'server_error':\n        return 'Erreur serveur lors de l\\'authentification';\n      default:\n        return 'Erreur d\\'authentification inconnue';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"google-auth-success-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"google-auth-success-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"google-auth-success-box\",\n        children: error ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Erreur d'authentification\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Redirection vers la page de connexion...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Authentification en cours...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Veuillez patienter, vous allez \\xEAtre redirig\\xE9.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n_s(GoogleAuthSuccess, \"OiN5sm3JickSPEzKQijx11v2eGI=\", false, function () {\n  return [useHistory, useLocation];\n});\n_c = GoogleAuthSuccess;\nexport default GoogleAuthSuccess;\nvar _c;\n$RefreshReg$(_c, \"GoogleAuthSuccess\");","map":{"version":3,"names":["React","useEffect","useState","useHistory","useLocation","jsxDEV","_jsxDEV","GoogleAuthSuccess","_s","history","location","error","setError","handleGoogleAuthSuccess","urlParams","URLSearchParams","search","token","get","userDataParam","errorParam","getErrorMessage","setTimeout","push","userData","JSON","parse","decodeURIComponent","localStorage","setItem","stringify","loginEvent","CustomEvent","detail","user","window","dispatchEvent","dashboardRoute","role","parseError","console","errorCode","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/hp/Downloads/Project_/internMatch/frontend/src/components/Auth/GoogleAuthSuccess.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport './GoogleAuthSuccess.css';\r\n\r\nconst GoogleAuthSuccess = () => {\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        const handleGoogleAuthSuccess = () => {\r\n            try {\r\n                // Parse URL parameters\r\n                const urlParams = new URLSearchParams(location.search);\r\n                const token = urlParams.get('token');\r\n                const userDataParam = urlParams.get('user');\r\n                const errorParam = urlParams.get('error');\r\n\r\n                if (errorParam) {\r\n                    setError(getErrorMessage(errorParam));\r\n                    setTimeout(() => {\r\n                        history.push('/login');\r\n                    }, 3000);\r\n                    return;\r\n                }\r\n\r\n                if (token && userDataParam) {\r\n                    try {\r\n                        const userData = JSON.parse(decodeURIComponent(userDataParam));\r\n                        \r\n                        // Store authentication data\r\n                        localStorage.setItem('token', token);\r\n                        localStorage.setItem('user', JSON.stringify(userData));\r\n                        \r\n                        // Dispatch login event\r\n                        const loginEvent = new CustomEvent('userLogin', { \r\n                            detail: { user: userData } \r\n                        });\r\n                        window.dispatchEvent(loginEvent);\r\n                        \r\n                        // Redirect to appropriate dashboard\r\n                        let dashboardRoute;\r\n                        if (userData.role === 'admin') {\r\n                            dashboardRoute = '/admin-dashboard';\r\n                        } else if (userData.role === 'entreprise') {\r\n                            dashboardRoute = '/entreprise-dashboard';\r\n                        } else {\r\n                            dashboardRoute = '/dashboard';\r\n                        }\r\n                        \r\n                        history.push(dashboardRoute);\r\n                    } catch (parseError) {\r\n                        console.error('Error parsing user data:', parseError);\r\n                        setError('Erreur lors du traitement des données utilisateur');\r\n                        setTimeout(() => {\r\n                            history.push('/login');\r\n                        }, 3000);\r\n                    }\r\n                } else {\r\n                    setError('Données d\\'authentification manquantes');\r\n                    setTimeout(() => {\r\n                        history.push('/login');\r\n                    }, 3000);\r\n                }\r\n            } catch (error) {\r\n                console.error('Google auth success error:', error);\r\n                setError('Erreur lors de l\\'authentification');\r\n                setTimeout(() => {\r\n                    history.push('/login');\r\n                }, 3000);\r\n            }\r\n        };\r\n\r\n        handleGoogleAuthSuccess();\r\n    }, [history, location]);\r\n\r\n    const getErrorMessage = (errorCode) => {\r\n        switch (errorCode) {\r\n            case 'authentication_failed':\r\n                return 'Échec de l\\'authentification Google';\r\n            case 'google_auth_failed':\r\n                return 'Erreur lors de l\\'authentification Google';\r\n            case 'server_error':\r\n                return 'Erreur serveur lors de l\\'authentification';\r\n            default:\r\n                return 'Erreur d\\'authentification inconnue';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"google-auth-success-wrapper\">\r\n            <div className=\"google-auth-success-container\">\r\n                <div className=\"google-auth-success-box\">\r\n                    {error ? (\r\n                        <div className=\"error-content\">\r\n                            <div className=\"error-icon\">⚠️</div>\r\n                            <h2>Erreur d'authentification</h2>\r\n                            <p>{error}</p>\r\n                            <p>Redirection vers la page de connexion...</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"success-content\">\r\n                            <div className=\"loading-spinner\"></div>\r\n                            <h2>Authentification en cours...</h2>\r\n                            <p>Veuillez patienter, vous allez être redirigé.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GoogleAuthSuccess;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}