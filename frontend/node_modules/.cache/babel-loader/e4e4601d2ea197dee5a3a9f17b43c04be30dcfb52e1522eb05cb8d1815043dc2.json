{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getEntrepriseStages}from'../services/stageService';import{traiterCandidature}from'../services/candidatureService';import{getCandidatures}from'../services/candidatureService';import'../styles/EntrepriseCandidatures.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EntrepriseCandidatures=()=>{const[stages,setStages]=useState([]);const[selectedStage,setSelectedStage]=useState(null);const[candidatures,setCandidatures]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[comment,setComment]=useState('');const[processingId,setProcessingId]=useState(null);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchStages();},[]);// Filter candidatures based on search term\nconst filteredCandidatures=candidatures.filter(candidature=>{if(!searchTerm)return true;const searchLower=searchTerm.toLowerCase();return candidature.etudiant.nom.toLowerCase().includes(searchLower)||candidature.etudiant.prenom.toLowerCase().includes(searchLower)||getStatusText(candidature.status).toLowerCase().includes(searchLower);});// Helper function to get status display text\nconst getStatusText=status=>{switch(status){case'en_attente':return'En attente';case'accepté':return'Acceptée';case'refusé':return'Refusée';default:return status;}};// Helper function to get status icon\nconst getStatusIcon=status=>{switch(status){case'en_attente':return/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"status-icon pending\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m9 12 2 2 4-4\",fill:\"none\",stroke:\"none\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"3\",fill:\"currentColor\"})]});case'accepté':return/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"status-icon accepted\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m9 12 2 2 4-4\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"})]});case'refusé':return/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"status-icon rejected\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m15 9-6 6\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m9 9 6 6\",stroke:\"currentColor\",strokeWidth:\"2\"})]});default:return null;}};// Helper function to get file URL\nconst getFileUrl=filePath=>{if(!filePath)return null;// For uploaded files, use backend server to serve them\nif(filePath.startsWith('/uploads/')){return\"http://localhost:3001\".concat(filePath);}// For legacy files without /uploads/ prefix, add it\nreturn\"http://localhost:3001/uploads/\".concat(filePath);};const fetchStages=async()=>{try{setLoading(true);const data=await getEntrepriseStages();console.log(\"Raw API response:\",data);console.log(\"Data type:\",typeof data);console.log(\"Is array:\",Array.isArray(data));if(data&&data.length>0){console.log(\"First stage structure:\",data[0]);console.log(\"First stage candidatures:\",data[0].candidatures);}setStages(data);}catch(err){setError(\"Erreur lors du chargement des stages\");console.error(err);}finally{setLoading(false);}};const handleStageSelect=stageId=>{console.log(\"Stage ID sélectionné:\",stageId);console.log(\"Type de stageId:\",typeof stageId);// Conversion en nombre si c'est une chaîne\nconst id=typeof stageId==='string'?parseInt(stageId,10):stageId;const stage=stages.find(s=>s.id===id);console.log(\"Stage trouvé:\",stage);setSelectedStage(stage);if(stage!==null&&stage!==void 0&&stage.candidatures){console.log(\"Candidatures trouvées:\",stage.candidatures);setCandidatures(stage.candidatures);}else{console.log(\"Aucune candidature trouvée pour ce stage\");setCandidatures([]);}};const handleTraiter=async(candidatureId,status)=>{try{setProcessingId(candidatureId);setLoading(true);const response=await traiterCandidature(candidatureId,{status,commentaire:comment});// Si la réponse contient des statistiques mises à jour, on peut les utiliser\nif(response.stats){console.log('Statistiques mises à jour:',response.stats);// Émettre un événement pour notifier le dashboard des changements\nwindow.dispatchEvent(new CustomEvent('statsUpdated',{detail:response.stats}));}// Refresh candidatures after processing\nif(selectedStage){handleStageSelect(selectedStage.id);}setComment('');// Show success feedback\nsetTimeout(()=>setProcessingId(null),1000);}catch(err){setError(\"Erreur lors du traitement de la candidature\");console.error(err);setProcessingId(null);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Chargement...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"candidatures-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des Candidatures\"}),/*#__PURE__*/_jsx(\"div\",{className:\"candidatures-summary\",children:selectedStage&&/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:candidatures.length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Total\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:candidatures.filter(c=>c.status==='en_attente').length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"En attente\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:candidatures.filter(c=>c.status==='accepté').length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Accept\\xE9es\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:candidatures.filter(c=>c.status==='refusé').length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Refus\\xE9es\"})]})]})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stage-selector\",children:/*#__PURE__*/_jsxs(\"select\",{onChange:e=>handleStageSelect(e.target.value),value:(selectedStage===null||selectedStage===void 0?void 0:selectedStage.id)||'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner un stage\"}),stages.map(stage=>{var _stage$candidatures;return/*#__PURE__*/_jsxs(\"option\",{value:stage.id,children:[stage.titre,\" \",((_stage$candidatures=stage.candidatures)===null||_stage$candidatures===void 0?void 0:_stage$candidatures.length)>0?\"(\".concat(stage.candidatures.length,\" candidature(s))\"):'(0 candidature)']},stage.id);})]})}),selectedStage&&candidatures.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"search-icon\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"11\",cy:\"11\",r:\"8\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m21 21-4.35-4.35\",stroke:\"currentColor\",strokeWidth:\"2\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher par nom ou statut...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"search-clear\",\"aria-label\":\"Effacer la recherche\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\",stroke:\"currentColor\",strokeWidth:\"2\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:searchTerm&&/*#__PURE__*/_jsxs(\"span\",{className:\"results-count\",children:[filteredCandidatures.length,\" r\\xE9sultat\",filteredCandidatures.length!==1?'s':'',\" trouv\\xE9\",filteredCandidatures.length!==1?'s':'']})})]})]}),\"            \",selectedStage&&/*#__PURE__*/_jsx(\"div\",{className:\"candidatures-list\",children:filteredCandidatures.length>0?filteredCandidatures.map(candidature=>/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-title\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[candidature.etudiant.nom,\" \",candidature.etudiant.prenom]}),/*#__PURE__*/_jsxs(\"span\",{className:\"candidature-date\",children:[\"Postul\\xE9 le \",new Date(candidature.datePostulation).toLocaleDateString('fr-FR')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-badge \".concat(candidature.status),children:[getStatusIcon(candidature.status),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:getStatusText(candidature.status)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{children:candidature.etudiant.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"CV:\"}),candidature.etudiant.cv?/*#__PURE__*/_jsxs(\"a\",{href:getFileUrl(candidature.etudiant.cv),target:\"_blank\",rel:\"noopener noreferrer\",className:\"document-link\",children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"document-icon\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"14,2 14,8 20,8\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"16\",y1:\"13\",x2:\"8\",y2:\"13\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"16\",y1:\"17\",x2:\"8\",y2:\"17\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"10,9 9,9 8,9\",stroke:\"currentColor\",strokeWidth:\"2\"})]}),\"T\\xE9l\\xE9charger le CV\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"missing-document\",children:\"Non fourni\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lettre de motivation:\"}),candidature.etudiant.lettreMotivation?/*#__PURE__*/_jsxs(\"a\",{href:getFileUrl(candidature.etudiant.lettreMotivation),target:\"_blank\",rel:\"noopener noreferrer\",className:\"document-link\",children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"document-icon\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"14,2 14,8 20,8\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"16\",y1:\"13\",x2:\"8\",y2:\"13\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"16\",y1:\"17\",x2:\"8\",y2:\"17\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"10,9 9,9 8,9\",stroke:\"currentColor\",strokeWidth:\"2\"})]}),\"T\\xE9l\\xE9charger la lettre\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"missing-document\",children:\"Non fournie\"})]})]}),candidature.status==='en_attente'&&/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment-\".concat(candidature.id),className:\"comment-label\",children:\"Commentaire (optionnel)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"comment-\".concat(candidature.id),placeholder:\"Ajouter un commentaire pour l'\\xE9tudiant...\",value:comment,onChange:e=>setComment(e.target.value),className:\"comment-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleTraiter(candidature.id,'accepté'),className:\"btn btn-success \".concat(processingId===candidature.id?'loading':''),disabled:processingId===candidature.id,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-text\",children:\"Accepter\"}),processingId===candidature.id&&/*#__PURE__*/_jsx(\"div\",{className:\"btn-loader\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleTraiter(candidature.id,'refusé'),className:\"btn btn-danger \".concat(processingId===candidature.id?'loading':''),disabled:processingId===candidature.id,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-text\",children:\"Refuser\"}),processingId===candidature.id&&/*#__PURE__*/_jsx(\"div\",{className:\"btn-loader\"})]})]})]}),candidature.commentaireEntreprise&&/*#__PURE__*/_jsxs(\"div\",{className:\"candidature-comment\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Votre commentaire:\"}),/*#__PURE__*/_jsx(\"p\",{children:candidature.commentaireEntreprise})]})]},candidature.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-candidatures\",children:searchTerm?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"no-results-icon\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"11\",cy:\"11\",r:\"8\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m21 21-4.35-4.35\",stroke:\"currentColor\",strokeWidth:\"2\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Aucun r\\xE9sultat trouv\\xE9\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Aucune candidature ne correspond \\xE0 votre recherche \\\"\",searchTerm,\"\\\"\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"btn btn-secondary\",children:\"Effacer la recherche\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"no-candidatures-icon\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"2\",width:\"8\",height:\"4\",rx:\"1\",ry:\"1\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Aucune candidature\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Il n'y a pas encore de candidature pour ce stage\"})]})})})]});};export default EntrepriseCandidatures;","map":{"version":3,"names":["React","useState","useEffect","getEntrepriseStages","traiterCandidature","getCandidatures","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EntrepriseCandidatures","stages","setStages","selectedStage","setSelectedStage","candidatures","setCandidatures","loading","setLoading","error","setError","comment","setComment","processingId","setProcessingId","searchTerm","setSearchTerm","fetchStages","filteredCandidatures","filter","candidature","searchLower","toLowerCase","etudiant","nom","includes","prenom","getStatusText","status","getStatusIcon","viewBox","className","children","cx","cy","r","fill","stroke","strokeWidth","d","getFileUrl","filePath","startsWith","concat","data","console","log","Array","isArray","length","err","handleStageSelect","stageId","id","parseInt","stage","find","s","handleTraiter","candidatureId","response","commentaire","stats","window","dispatchEvent","CustomEvent","detail","setTimeout","c","onChange","e","target","value","map","_stage$candidatures","titre","type","placeholder","onClick","x1","y1","x2","y2","Date","datePostulation","toLocaleDateString","email","cv","href","rel","points","lettreMotivation","htmlFor","disabled","commentaireEntreprise","x","y","width","height","rx","ry"],"sources":["C:/Users/hp/Downloads/Project_/internship-management-app/frontend/src/pages/EntrepriseCandidatures.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getEntrepriseStages } from '../services/stageService';\r\nimport { traiterCandidature } from '../services/candidatureService';\r\nimport { getCandidatures } from '../services/candidatureService';\r\nimport '../styles/EntrepriseCandidatures.css';\r\n\r\nconst EntrepriseCandidatures = () => {\r\n    const [stages, setStages] = useState([]);\r\n    const [selectedStage, setSelectedStage] = useState(null);\r\n    const [candidatures, setCandidatures] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [comment, setComment] = useState('');\r\n    const [processingId, setProcessingId] = useState(null);\r\n    const [searchTerm, setSearchTerm] = useState('');    useEffect(() => {\r\n        fetchStages();\r\n    }, []);\r\n\r\n    // Filter candidatures based on search term\r\n    const filteredCandidatures = candidatures.filter(candidature => {\r\n        if (!searchTerm) return true;\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n            candidature.etudiant.nom.toLowerCase().includes(searchLower) ||\r\n            candidature.etudiant.prenom.toLowerCase().includes(searchLower) ||\r\n            getStatusText(candidature.status).toLowerCase().includes(searchLower)\r\n        );\r\n    });\r\n\r\n    // Helper function to get status display text\r\n    const getStatusText = (status) => {\r\n        switch (status) {\r\n            case 'en_attente':\r\n                return 'En attente';\r\n            case 'accepté':\r\n                return 'Acceptée';\r\n            case 'refusé':\r\n                return 'Refusée';\r\n            default:\r\n                return status;\r\n        }\r\n    };\r\n\r\n    // Helper function to get status icon\r\n    const getStatusIcon = (status) => {\r\n        switch (status) {\r\n            case 'en_attente':\r\n                return (\r\n                    <svg viewBox=\"0 0 24 24\" className=\"status-icon pending\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                        <path d=\"m9 12 2 2 4-4\" fill=\"none\" stroke=\"none\"/>\r\n                        <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"currentColor\"/>\r\n                    </svg>\r\n                );\r\n            case 'accepté':\r\n                return (\r\n                    <svg viewBox=\"0 0 24 24\" className=\"status-icon accepted\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                        <path d=\"m9 12 2 2 4-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                    </svg>\r\n                );\r\n            case 'refusé':\r\n                return (\r\n                    <svg viewBox=\"0 0 24 24\" className=\"status-icon rejected\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                        <path d=\"m15 9-6 6\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                        <path d=\"m9 9 6 6\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                    </svg>\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };    // Helper function to get file URL\r\n    const getFileUrl = (filePath) => {\r\n        if (!filePath) return null;\r\n        \r\n        // For uploaded files, use backend server to serve them\r\n        if (filePath.startsWith('/uploads/')) {\r\n            return `http://localhost:3001${filePath}`;\r\n        }\r\n        \r\n        // For legacy files without /uploads/ prefix, add it\r\n        return `http://localhost:3001/uploads/${filePath}`;\r\n    };const fetchStages = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await getEntrepriseStages();\r\n            console.log(\"Raw API response:\", data);\r\n            console.log(\"Data type:\", typeof data);\r\n            console.log(\"Is array:\", Array.isArray(data));\r\n            if (data && data.length > 0) {\r\n                console.log(\"First stage structure:\", data[0]);\r\n                console.log(\"First stage candidatures:\", data[0].candidatures);\r\n            }\r\n            setStages(data);\r\n        } catch (err) {\r\n            setError(\"Erreur lors du chargement des stages\");\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleStageSelect = (stageId) => {\r\n        console.log(\"Stage ID sélectionné:\", stageId);\r\n        console.log(\"Type de stageId:\", typeof stageId);\r\n        \r\n        // Conversion en nombre si c'est une chaîne\r\n        const id = typeof stageId === 'string' ? parseInt(stageId, 10) : stageId;\r\n        \r\n        const stage = stages.find(s => s.id === id);\r\n        console.log(\"Stage trouvé:\", stage);\r\n        \r\n        setSelectedStage(stage);\r\n        \r\n        if (stage?.candidatures) {\r\n            console.log(\"Candidatures trouvées:\", stage.candidatures);\r\n            setCandidatures(stage.candidatures);\r\n        } else {\r\n            console.log(\"Aucune candidature trouvée pour ce stage\");\r\n            setCandidatures([]);\r\n        }\r\n    };    const handleTraiter = async (candidatureId, status) => {\r\n        try {\r\n            setProcessingId(candidatureId);\r\n            setLoading(true);\r\n            const response = await traiterCandidature(candidatureId, {\r\n                status,\r\n                commentaire: comment\r\n            });\r\n            \r\n            // Si la réponse contient des statistiques mises à jour, on peut les utiliser\r\n            if (response.stats) {\r\n                console.log('Statistiques mises à jour:', response.stats);\r\n                // Émettre un événement pour notifier le dashboard des changements\r\n                window.dispatchEvent(new CustomEvent('statsUpdated', { \r\n                    detail: response.stats \r\n                }));\r\n            }\r\n            \r\n            // Refresh candidatures after processing\r\n            if (selectedStage) {\r\n                handleStageSelect(selectedStage.id);\r\n            }\r\n            \r\n            setComment('');\r\n            \r\n            // Show success feedback\r\n            setTimeout(() => setProcessingId(null), 1000);\r\n        } catch (err) {\r\n            setError(\"Erreur lors du traitement de la candidature\");\r\n            console.error(err);\r\n            setProcessingId(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"loading\">Chargement...</div>;\r\n    }    return (\r\n        <div className=\"candidatures-container\">\r\n            <div className=\"page-header\">\r\n                <h2>Gestion des Candidatures</h2>\r\n                <div className=\"candidatures-summary\">\r\n                    {selectedStage && (\r\n                        <div className=\"summary-stats\">\r\n                            <div className=\"stat-item\">\r\n                                <span className=\"stat-number\">{candidatures.length}</span>\r\n                                <span className=\"stat-label\">Total</span>\r\n                            </div>\r\n                            <div className=\"stat-item\">\r\n                                <span className=\"stat-number\">{candidatures.filter(c => c.status === 'en_attente').length}</span>\r\n                                <span className=\"stat-label\">En attente</span>\r\n                            </div>\r\n                            <div className=\"stat-item\">\r\n                                <span className=\"stat-number\">{candidatures.filter(c => c.status === 'accepté').length}</span>\r\n                                <span className=\"stat-label\">Acceptées</span>\r\n                            </div>\r\n                            <div className=\"stat-item\">\r\n                                <span className=\"stat-number\">{candidatures.filter(c => c.status === 'refusé').length}</span>\r\n                                <span className=\"stat-label\">Refusées</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            \r\n            {error && <div className=\"error-message\">{error}</div>}\r\n            \r\n            <div className=\"controls-section\">\r\n                <div className=\"stage-selector\">\r\n                    <select \r\n                        onChange={(e) => handleStageSelect(e.target.value)}\r\n                        value={selectedStage?.id || ''}\r\n                    >\r\n                        <option value=\"\">Sélectionner un stage</option>\r\n                        {stages.map(stage => (\r\n                            <option key={stage.id} value={stage.id}>\r\n                                {stage.titre} {stage.candidatures?.length > 0 ? `(${stage.candidatures.length} candidature(s))` : '(0 candidature)'}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                {selectedStage && candidatures.length > 0 && (\r\n                    <div className=\"search-container\">\r\n                        <div className=\"search-box\">\r\n                            <svg className=\"search-icon\" viewBox=\"0 0 24 24\">\r\n                                <circle cx=\"11\" cy=\"11\" r=\"8\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                <path d=\"m21 21-4.35-4.35\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                            </svg>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Rechercher par nom ou statut...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                className=\"search-input\"\r\n                            />\r\n                            {searchTerm && (\r\n                                <button\r\n                                    onClick={() => setSearchTerm('')}\r\n                                    className=\"search-clear\"\r\n                                    aria-label=\"Effacer la recherche\"\r\n                                >\r\n                                    <svg viewBox=\"0 0 24 24\">\r\n                                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                    </svg>\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"search-results\">\r\n                            {searchTerm && (\r\n                                <span className=\"results-count\">\r\n                                    {filteredCandidatures.length} résultat{filteredCandidatures.length !== 1 ? 's' : ''} trouvé{filteredCandidatures.length !== 1 ? 's' : ''}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>            {selectedStage && (\r\n                <div className=\"candidatures-list\">\r\n                    {filteredCandidatures.length > 0 ? (\r\n                        filteredCandidatures.map(candidature => (\r\n                            <div key={candidature.id} className=\"candidature-card\">\r\n                                <div className=\"candidature-header\">\r\n                                    <div className=\"candidature-title\">\r\n                                        <h3>{candidature.etudiant.nom} {candidature.etudiant.prenom}</h3>\r\n                                        <span className=\"candidature-date\">\r\n                                            Postulé le {new Date(candidature.datePostulation).toLocaleDateString('fr-FR')}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className={`status-badge ${candidature.status}`}>\r\n                                        {getStatusIcon(candidature.status)}\r\n                                        <span className=\"status-text\">{getStatusText(candidature.status)}</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"candidature-details\">\r\n                                    <div className=\"detail-item\">\r\n                                        <strong>Email:</strong> \r\n                                        <span>{candidature.etudiant.email}</span>\r\n                                    </div>\r\n                                    <div className=\"detail-item\">\r\n                                        <strong>CV:</strong> \r\n                                        {candidature.etudiant.cv ? (\r\n                                            <a href={getFileUrl(candidature.etudiant.cv)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"document-link\">\r\n                                                <svg viewBox=\"0 0 24 24\" className=\"document-icon\">\r\n                                                    <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <polyline points=\"14,2 14,8 20,8\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <polyline points=\"10,9 9,9 8,9\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                </svg>\r\n                                                Télécharger le CV\r\n                                            </a>\r\n                                        ) : (\r\n                                            <span className=\"missing-document\">Non fourni</span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"detail-item\">\r\n                                        <strong>Lettre de motivation:</strong> \r\n                                        {candidature.etudiant.lettreMotivation ? (\r\n                                            <a href={getFileUrl(candidature.etudiant.lettreMotivation)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"document-link\">\r\n                                                <svg viewBox=\"0 0 24 24\" className=\"document-icon\">\r\n                                                    <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <polyline points=\"14,2 14,8 20,8\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                    <polyline points=\"10,9 9,9 8,9\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                                </svg>\r\n                                                Télécharger la lettre\r\n                                            </a>\r\n                                        ) : (\r\n                                            <span className=\"missing-document\">Non fournie</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {candidature.status === 'en_attente' && (\r\n                                    <div className=\"candidature-actions\">\r\n                                        <div className=\"comment-section\">\r\n                                            <label htmlFor={`comment-${candidature.id}`} className=\"comment-label\">\r\n                                                Commentaire (optionnel)\r\n                                            </label>\r\n                                            <textarea\r\n                                                id={`comment-${candidature.id}`}\r\n                                                placeholder=\"Ajouter un commentaire pour l'étudiant...\"\r\n                                                value={comment}\r\n                                                onChange={(e) => setComment(e.target.value)}\r\n                                                className=\"comment-input\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"button-group\">\r\n                                            <button \r\n                                                onClick={() => handleTraiter(candidature.id, 'accepté')}\r\n                                                className={`btn btn-success ${processingId === candidature.id ? 'loading' : ''}`}\r\n                                                disabled={processingId === candidature.id}\r\n                                            >\r\n                                                <span className=\"btn-icon\">✓</span>\r\n                                                <span className=\"btn-text\">Accepter</span>\r\n                                                {processingId === candidature.id && <div className=\"btn-loader\"></div>}\r\n                                            </button>\r\n                                            <button \r\n                                                onClick={() => handleTraiter(candidature.id, 'refusé')}\r\n                                                className={`btn btn-danger ${processingId === candidature.id ? 'loading' : ''}`}\r\n                                                disabled={processingId === candidature.id}\r\n                                            >\r\n                                                <span className=\"btn-icon\">✕</span>\r\n                                                <span className=\"btn-text\">Refuser</span>\r\n                                                {processingId === candidature.id && <div className=\"btn-loader\"></div>}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {candidature.commentaireEntreprise && (\r\n                                    <div className=\"candidature-comment\">\r\n                                        <strong>Votre commentaire:</strong>\r\n                                        <p>{candidature.commentaireEntreprise}</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"no-candidatures\">\r\n                            {searchTerm ? (\r\n                                <>\r\n                                    <svg viewBox=\"0 0 24 24\" className=\"no-results-icon\">\r\n                                        <circle cx=\"11\" cy=\"11\" r=\"8\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                        <path d=\"m21 21-4.35-4.35\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                    </svg>\r\n                                    <h3>Aucun résultat trouvé</h3>\r\n                                    <p>Aucune candidature ne correspond à votre recherche \"{searchTerm}\"</p>\r\n                                    <button onClick={() => setSearchTerm('')} className=\"btn btn-secondary\">\r\n                                        Effacer la recherche\r\n                                    </button>\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <svg viewBox=\"0 0 24 24\" className=\"no-candidatures-icon\">\r\n                                        <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"></path>\r\n                                        <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"></rect>\r\n                                    </svg>\r\n                                    <h3>Aucune candidature</h3>\r\n                                    <p>Il n'y a pas encore de candidature pour ce stage</p>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EntrepriseCandidatures;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}